!function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(require,module,exports){window.q=require("./queue-flow")},{"./queue-flow":2}],3:[function(require,module,exports){var events=require("events");exports.isArray=isArray;exports.isDate=function(obj){return Object.prototype.toString.call(obj)==="[object Date]"};exports.isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.print=function(){};exports.puts=function(){};exports.debug=function(){};exports.inspect=function(obj,showHidden,depth,colors){var seen=[];var stylize=function(str,styleType){var styles={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};var style={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[styleType];if(style){return"["+styles[style][0]+"m"+str+"["+styles[style][1]+"m"}else{return str}};if(!colors){stylize=function(str,styleType){return str}}function format(value,recurseTimes){if(value&&typeof value.inspect==="function"&&value!==exports&&!(value.constructor&&value.constructor.prototype===value)){return value.inspect(recurseTimes)}switch(typeof value){case"undefined":return stylize("undefined","undefined");case"string":var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(simple,"string");case"number":return stylize(""+value,"number");case"boolean":return stylize(""+value,"boolean")}if(value===null){return stylize("null","null")}var visible_keys=Object_keys(value);var keys=showHidden?Object_getOwnPropertyNames(value):visible_keys;if(typeof value==="function"&&keys.length===0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{var name=value.name?": "+value.name:"";return stylize("[Function"+name+"]","special")}}if(isDate(value)&&keys.length===0){return stylize(value.toUTCString(),"date")}var base,type,braces;if(isArray(value)){type="Array";braces=["[","]"]}else{type="Object";braces=["{","}"]}if(typeof value==="function"){var n=value.name?": "+value.name:"";base=isRegExp(value)?" "+value:" [Function"+n+"]"}else{base=""}if(isDate(value)){base=" "+value.toUTCString()}if(keys.length===0){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return stylize(""+value,"regexp")}else{return stylize("[Object]","special")}}seen.push(value);var output=keys.map(function(key){var name,str;if(value.__lookupGetter__){if(value.__lookupGetter__(key)){if(value.__lookupSetter__(key)){str=stylize("[Getter/Setter]","special")}else{str=stylize("[Getter]","special")}}else{if(value.__lookupSetter__(key)){str=stylize("[Setter]","special")}}}if(visible_keys.indexOf(key)<0){name="["+key+"]"}if(!str){if(seen.indexOf(value[key])<0){if(recurseTimes===null){str=format(value[key])}else{str=format(value[key],recurseTimes-1)}if(str.indexOf("\n")>-1){if(isArray(value)){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=stylize("[Circular]","special")}}if(typeof name==="undefined"){if(type==="Array"&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=stylize(name,"string")}}return name+": "+str});seen.pop();var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.length+1},0);if(length>50){output=braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}else{output=braces[0]+base+" "+output.join(", ")+" "+braces[1]}return output}return format(obj,typeof depth==="undefined"?2:depth)};function isArray(ar){return ar instanceof Array||Array.isArray(ar)||ar&&ar!==Object.prototype&&isArray(ar.__proto__)}function isRegExp(re){return re instanceof RegExp||typeof re==="object"&&Object.prototype.toString.call(re)==="[object RegExp]"}function isDate(d){if(d instanceof Date)return true;if(typeof d!=="object")return false;var properties=Date.prototype&&Object_getOwnPropertyNames(Date.prototype);var proto=d.__proto__&&Object_getOwnPropertyNames(d.__proto__);return JSON.stringify(proto)===JSON.stringify(properties)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(msg){};exports.pump=null;var Object_keys=Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res};var Object_getOwnPropertyNames=Object.getOwnPropertyNames||function(obj){var res=[];for(var key in obj){if(Object.hasOwnProperty.call(obj,key))res.push(key)}return res};var Object_create=Object.create||function(prototype,properties){var object;if(prototype===null){object={__proto__:null}}else{if(typeof prototype!=="object"){throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'")}var Type=function(){};Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(typeof properties!=="undefined"&&Object.defineProperties){Object.defineProperties(object,properties)}return object};exports.inherits=function(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object_create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(typeof f!=="string"){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(exports.inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":return JSON.stringify(args[i++]);default:return x}});for(var x=args[i];i<len;x=args[++i]){if(x===null||typeof x!=="object"){str+=" "+x}else{str+=" "+exports.inspect(x)}}return str}},{events:4}],5:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],4:[function(require,module,exports){!function(process){if(!process.EventEmitter)process.EventEmitter=function(){};var EventEmitter=exports.EventEmitter=process.EventEmitter;var isArray=typeof Array.isArray==="function"?Array.isArray:function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(x===xs[i])return i}return-1}var defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!this._events)this._events={};this._events.maxListeners=n};EventEmitter.prototype.emit=function(type){if(type==="error"){if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var handler=this._events[type];if(!handler)return false;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return true}else if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1);var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}return true}else{return false}};EventEmitter.prototype.addListener=function(type,listener){if("function"!==typeof listener){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",type,listener);if(!this._events[type]){this._events[type]=listener}else if(isArray(this._events[type])){if(!this._events[type].warned){var m;if(this._events.maxListeners!==undefined){m=this._events.maxListeners}else{m=defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);console.trace()}}this._events[type].push(listener)}else{this._events[type]=[this._events[type],listener]}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){var self=this;self.on(type,function g(){self.removeListener(type,g);listener.apply(this,arguments)});return this};EventEmitter.prototype.removeListener=function(type,listener){if("function"!==typeof listener){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=indexOf(list,listener);if(i<0)return this;list.splice(i,1);if(list.length==0)delete this._events[type]}else if(this._events[type]===listener){delete this._events[type]}return this};EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){this._events={};return this}if(type&&this._events&&this._events[type])this._events[type]=null;return this};EventEmitter.prototype.listeners=function(type){if(!this._events)this._events={};if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]}}(require("__browserify_process"))},{__browserify_process:5}],2:[function(require,module,exports){!function(process,global){var isAsync=require("is-async");var EventEmitter=require("async-cancelable-events");var util=require("util");var Infiniqueue=require("infiniqueue");var nextTick=global.setImmediate?global.setImmediate:process.nextTick;var q;function makeAsync(qfMethod){return function(){return qfMethod.apply(this,Array.prototype.slice.call(arguments,0).map(function(arg){if(arg instanceof Function)arg.async=true;return arg}))}}function makeSync(qfMethod){return function(){return qfMethod.apply(this,Array.prototype.slice.call(arguments,0).map(function(arg){if(arg instanceof Function)arg.sync=true;return arg}))}}function Q(nameOrArray,options,namespace){EventEmitter.call(this);this.options=options||{};this.options.parallelism=this.options.parallelism||1;this.namespace=namespace;this.wasName=nameOrArray instanceof Array?false:true;this.queue=new Infiniqueue;if(nameOrArray instanceof Array){for(var i=0;i<nameOrArray.length;i++){this.queue.enqueue(nameOrArray[i])}}this.openQueue=new Infiniqueue;this.handler=function(self,value,struct){self.handlerCallback(struct,function(){})};this.ender=function(){};this.handlerSet=true;this.handlerRuns=0;this.on("pipe",function(piper){piper.on("data",this.push.bind(this))}.bind(this));if(this.queue.length>0)this.on("empty",this.close.bind(this));nextTick(this.enqueueParallelism.bind(this));return this}util.inherits(Q,EventEmitter);Q.prototype.setHandlers=function setHandlers(handlerFunc,endFunc){this.handler=handlerFunc;this.ender=endFunc;this.handlerSet=true;this.enqueueParallelism();return this};Q.prototype.handlerCallback=function handlerCallback(openQueueStruct,done){this.handlerRuns=++this.handlerRuns%50;openQueueStruct.done=true;openQueueStruct.doneFunc=done;while(this.openQueue.length){var currStruct=this.openQueue.start.val;if(!currStruct.done)break;currStruct.doneFunc();this.openQueue.dequeue()}if(this.openQueue.length===0&&(!this.queue||this.queue.length===0)){this.emitSync("empty")}else{this.enqueueParallelism()}};function OpenQueueStruct(){this.done=false;this.doneFunc=function(){};return this}Q.prototype.enqueueParallelism=function enqueueParallelism(){if(this.handlerSet){var numToProcess=this.options.parallelism-this.openQueue.length>this.queue.length?this.queue.length:this.options.parallelism-this.openQueue.length;for(var i=0;i<numToProcess;i++){var openQueueStruct=new OpenQueueStruct;this.openQueue.enqueue(openQueueStruct);if(this.handlerRuns===0){var self=this;nextTick(function(){self.handler(self,self.queue.dequeue(),openQueueStruct)})}else{this.handler(this,this.queue.dequeue(),openQueueStruct)}}}};Q.prototype.push=function push(){for(var i=0;i<arguments.length;i++){this.queue.enqueue(arguments[i])}this.enqueueParallelism();return this};Q.prototype.write=Q.prototype.push;Q.prototype.pushOne=function pushOne(val){this.queue.enqueue(val);this.enqueueParallelism();return this};Q.prototype.close=function close(){this.emit("close",function(result){if(result){this.removeAllListeners("push");this.on("push",function(){return false});var flushQueue=function(){this.handlerSet=false;this.handler=function(){};if(this.queue)this.queue.shutdown();this.queue=undefined;if(this.openQueue)this.openQueue.shutdown();this.openQueue=undefined;this.push=this.pushOne=function(){throw new Error("Queue already closed")};if(this.namespace)this.namespace.clearQueue(this);if(this.ender instanceof Function){this.ender("close")}}.bind(this);if(this.openQueue&&!this.openQueue.length&&this.queue&&!this.queue.length){flushQueue()}else{this.removeAllListeners("empty");this.on("empty",flushQueue)}}}.bind(this));return this};Q.prototype.end=Q.prototype.close;Q.prototype.kill=function kill(){this.emitSync("kill");this.handlerSet=false;this.handler=function(){};this.queue.shutdown();this.queue=undefined;if(this.openQueue)this.openQueue.shutdown();this.openQueue=undefined;this.push=this.pushOne=function(){throw new Error("Queue already closed")};if(this.namespace)this.namespace.clearQueue(this);if(this.ender instanceof Function){this.ender("kill")}};Q.prototype.as=function as(name){if(this.namespace)this.namespace.addQueue(name,this);return this};Q.prototype.concat=function concat(array){this.push.apply(this,array);return this};Q.prototype.each=function each(callback){var outQueue=new Q(null,this.options,this.namespace);if(isAsync(callback,2)){this.setHandlers(function(self,value,struct){callback(value,function(){self.handlerCallback(struct,outQueue.push.bind(outQueue,value))})},function(end){outQueue[end]()})}else{this.setHandlers(function(self,value,struct){callback(value);self.handlerCallback(struct,outQueue.push.bind(outQueue,value))},function(end){outQueue[end]()})}return outQueue};Q.prototype.eachAsync=makeAsync(Q.prototype.each);Q.prototype.eachSync=makeSync(Q.prototype.each);Q.prototype.wait=function wait(delay){if(typeof delay==="function"&&isAsync(delay,2)){return this.each(function(val,callback){delay(val,function(delay){setTimeout(callback,delay)})})}else if(typeof delay==="function"){return this.each(function(val,callback){setTimeout(callback,delay(val))})}else{return this.each(function(val,callback){setTimeout(callback,delay)})}};Q.prototype.waitAsync=makeAsync(Q.prototype.wait);Q.prototype.waitSync=makeSync(Q.prototype.wait);var inOut=function inOut(outQueue,setter,callback){if(isAsync(callback,2)){this.setHandlers(function(self,value,struct){callback(value,function(result){self.handlerCallback(struct,setter.bind(this,value,result))})},function(end){outQueue[end]()})}else{this.setHandlers(function(self,value,struct){self.handlerCallback(struct,setter.bind(this,value,callback(value)))},function(end){outQueue[end]()})}return outQueue};Q.prototype.map=function map(callback){var outQueue=new Q(null,this.options,this.namespace);if(isAsync(callback,2)){this.setHandlers(function(self,value,struct){callback(value,function(result){self.handlerCallback(struct,function(){outQueue.pushOne(result)})})},function(end){outQueue[end]()})}else{this.setHandlers(function(self,value,struct){self.handlerCallback(struct,function(){outQueue.pushOne(callback(value))})},function(end){outQueue[end]()})}return outQueue};Q.prototype.mapAsync=makeAsync(Q.prototype.map);Q.prototype.mapSync=makeSync(Q.prototype.map);Q.prototype.reduce=function reduce(callback,last,initial){var out=initial;var outQueue;if(!last)outQueue=new Q(null,this.options,this.namespace);var endFunc=function(end){if(!!last&&last instanceof Function)last(out);if(!!last&&typeof last==="string")q(last).push(out);if(!last){outQueue.push(out);outQueue[end]()}};if(isAsync(callback,3)){this.setHandlers(function(self,value,struct){callback(out,value,function(result){self.handlerCallback(struct,function(){out=result})})},endFunc)}else{this.setHandlers(function(self,value,struct){self.handlerCallback(struct,function(){out=callback(out,value)})},endFunc)}return outQueue||this};Q.prototype.reduceAsync=makeAsync(Q.prototype.reduce);Q.prototype.reduceSync=makeSync(Q.prototype.reduce);Q.prototype.filter=function filter(callback){var outQueue=new Q(null,this.options,this.namespace);return inOut.bind(this)(outQueue,function filterSetter(value,result){if(result)outQueue.push(value)},callback)};Q.prototype.filterAsync=makeAsync(Q.prototype.filter);Q.prototype.filterSync=makeSync(Q.prototype.filter);Q.prototype.branch=function branch(callback){this.setHandlers(function(self,value,struct){function queueProcessor(queue){if(typeof queue==="string"){q(queue).push(value)}else if(typeof queue==="object"&&!!queue.push){queue.push(value)}}if(typeof callback==="function"&&isAsync(callback,2)){callback(value,function(result){self.handlerCallback(struct,function(){if(result instanceof Array){result.forEach(queueProcessor)}else{queueProcessor(result)}})})}else if(typeof callback==="function"){var result=callback(value);self.handlerCallback(struct,function(){if(result instanceof Array){result.forEach(queueProcessor)}else{queueProcessor(result)}})}else if(callback instanceof Array){self.handlerCallback(struct,function(){callback.forEach(queueProcessor)})}else{self.handlerCallback(struct,function(){queueProcessor(callback)})}});return this};Q.prototype.branchAsync=makeAsync(Q.prototype.branch);Q.prototype.branchSync=makeSync(Q.prototype.branch);var everySome=function everySome(polarity,callback,last){var outQueue;if(!last)outQueue=new Q(null,this.options,this.namespace);function shortCircuit(self,value,struct){self.handlerCallback(struct,function(){})}this.setHandlers(function(self,value,struct){if(isAsync(callback,2)){callback(value,function(result){self.handlerCallback(struct,function(){if(result===polarity){this.setHandlers(shortCircuit,function(){});if(!last){outQueue.push(polarity);outQueue.close()}if(!!last&&last instanceof Function)last(polarity);if(!!last&&typeof last==="string")q(last).push(polarity)}}.bind(this))}.bind(this))}else{self.handlerCallback(struct,function(){if(callback(value)===polarity){this.setHandlers(shortCircuit,function(){});if(!last){outQueue.push(polarity);outQueue.close()}if(!!last&&last instanceof Function)last(polarity);if(!!last&&typeof last==="string")q(last).push(polarity)}}.bind(this))}}.bind(this),function(end){if(!last){outQueue.push(!polarity);outQueue[end]()}if(!!last&&last instanceof Function)last(!polarity);if(!!last&&typeof last==="string")q(last).push(!polarity)});return outQueue||this};Q.prototype.every=function every(callback,last){return everySome.bind(this,false,callback,last)()};Q.prototype.everyAsync=makeAsync(Q.prototype.every);Q.prototype.everySync=makeSync(Q.prototype.every);Q.prototype.some=function some(callback,last){return everySome.bind(this,true,callback,last)()};Q.prototype.someAsync=makeAsync(Q.prototype.some);Q.prototype.someSync=makeSync(Q.prototype.some);Q.prototype.toArray=function toArray(last){var outQueue=this;var outArr=[];if(!last){outQueue=new Q(null,this.options,this.namespace)}else if(typeof last==="string"){outQueue=q(last)}this.setHandlers(function(self,value,struct){self.handlerCallback(struct,function(){outArr.push(value)})},typeof last==="function"?function(){last(outArr)}:function(end){outQueue.pushOne(outArr)[end]()});if(!this.wasName)this.close();return outQueue};Q.prototype.flatten=function flatten(depth){var outQueue=new Q(null,this.options,this.namespace);function processValue(value,currDepth){if(value&&value instanceof Array){if(depth&&typeof depth==="number"&&depth===currDepth){outQueue.push(value)}else{value.forEach(function(value){processValue(value,currDepth+1)})}}else{outQueue.push(value)}}this.setHandlers(function(self,value,struct){self.handlerCallback(struct,function(){processValue(value,0)})},function(end){outQueue[end]()});return outQueue};function ercb(outQueue,onError,self,value,struct,error,result){if(!error){self.handlerCallback(struct,function(){outQueue.push(result)})}else{if(!!onError&&onError instanceof Function){onError(error,result,value)}else if(typeof onError==="string"){self.handlerCallback(struct,function(){q(onError).push([error,result,value])})}else if(typeof onError==="object"){self.handlerCallback(struct,function(){onError.push([error,result,value])})}}}Q.prototype.node=function node(callback,onError){var outQueue=new Q(null,this.options,this.namespace);this.setHandlers(function(q,value,struct){if(!(value instanceof Array))value=[value];if(isAsync(callback,value.length+1)){value.push(ercb.bind(this,outQueue,onError,q,value,struct));callback.apply(this,value)}else{try{ercb.bind(this)(outQueue,onError,q,value,struct,undefined,callback.apply(this,value))}catch(e){ercb.bind(this)(outQueue,onError,q,value,struct,e)}}}.bind(this),function(end){outQueue[end]()});return outQueue};Q.prototype.nodeAsync=makeAsync(Q.prototype.node);Q.prototype.nodeSync=makeSync(Q.prototype.node);function execCommon(forceSyncAsync,args,onError){var outQueue=new Q(null,this.options,this.namespace);this.setHandlers(function(q,value,struct){if(!(value instanceof Function))return ercb(outQueue,onError,q,value,struct,new Error("Not a function"),undefined);function execFunc(args){if(forceSyncAsync==="async"||forceSyncAsync!=="sync"&&isAsync(value,args.length+1)){args.push(ercb.bind(this,outQueue,onError,q,value,struct));value.apply(this,args)}else{try{ercb(outQueue,onError,q,value,struct,undefined,value.apply(this,args))}catch(e){ercb(outQueue,onError,q,value,struct,e)}}}if(args instanceof Function&&isAsync(args,2)){args(value,function(){execFunc.bind(this)(Array.prototype.slice.call(arguments,0))})}else if(args instanceof Function){try{var args2=args(value);args2=args2 instanceof Array?args2:[args2];execFunc.bind(this)(args2)}catch(e){ercb.bind(this)(outQueue,onError,q,value,struct,e)}}else if(args instanceof Array){execFunc.bind(this)(args)}else{execFunc.bind(this)([args])}}.bind(this),function(end){outQueue[end]()});return outQueue}Q.prototype.exec=function exec(args,onError){return execCommon.bind(this,false)(args,onError)};Q.prototype.execSync=function execSync(args,onError){return execCommon.bind(this,"sync")(args,onError)};Q.prototype.execAsync=function execAsync(args,onError){return execCommon.bind(this,"async")(args,onError)};Q.prototype.subqueue=function subqueue(callback){if(isAsync(callback,2)){var inQueue=new Q(null,this.options,this.namespace);var outQueue=new Q(null,this.options,this.namespace);var buffer=[];this.each(buffer.push.bind(buffer));callback(inQueue,function(intermediateQ){inQueue.concat(buffer);intermediateQ.branch(outQueue)});return outQueue}else{return callback(this)}};Q.prototype.subqueueSync=makeSync(Q.prototype.subqueue);Q.prototype.subqueueAsync=makeAsync(Q.prototype.subqueue);Q.prototype.promise=function promise(callback,error){var outQueue=new Q(null,this.options,this.namespace);if(typeof error==="string"){error=q(error).push.bind(q(error))}else if(typeof error==="object"){error=error.push.bind(error)}else if(typeof error!=="function"){error=function(){}}this.setHandlers(function(self,value,struct){if(!(value instanceof Array))value=[value];callback.apply(this,value).then(function(result){self.handlerCallback(struct,function(){outQueue.push(result)})},error)},function(end){outQueue[end]()});return outQueue};Q.prototype.promiseAsync=Q.prototype.promise;Q.prototype.promiseSync=function(){throw"Synchronous Promises are Nonsensical!"};Q.prototype.pipe=function pipe(writable){if(typeof writable.write!=="function"||typeof writable.end!=="function")throw new Error("Not a valid writeable object!");this.setHandlers(function(self,value,struct){self.handlerCallback(struct,function(){writable.write(value)})},function(){writable.end()});return writable};Q.prototype.plug=function plug(){this.handlerSet=false;this.handler=function(){};this.ender=function(){};return this};function ns(){var namedQueues={};var q=function qFunc(nameOrArray,options){options=options||{};if(typeof nameOrArray==="string"){if(!namedQueues[nameOrArray]){namedQueues[nameOrArray]=new Q(nameOrArray,options,q)}return namedQueues[nameOrArray]}else if(nameOrArray instanceof Array){return new Q(nameOrArray,options,q)}else if(nameOrArray instanceof Object&&typeof nameOrArray.pipe==="function"&&typeof nameOrArray.on==="function"){var newQ=new Q(undefined,options,q);nameOrArray.on("data",newQ.push.bind(newQ));nameOrArray.on("end",newQ.close.bind(newQ));return newQ}else{return new Q(undefined,options,q)}};q.exists=function exists(queueName){return!!namedQueues[queueName]&&typeof namedQueues[queueName]==="object"};q.clearQueue=function clearQueue(nameOrQueue){if(typeof nameOrQueue==="string"){if(namedQueues[nameOrQueue])delete namedQueues[nameOrQueue]}else{Object.keys(namedQueues).forEach(function(name){if(namedQueues[name]===nameOrQueue)delete namedQueues[name]})}};q.addQueue=function addQueue(name,queue){namedQueues[name]=queue};q.tuple=function tuple(obj){return Object.keys(obj).reduce(function(outArr,key){return outArr.concat([[key,obj[key]]])},[])};q.ns=ns;q.Q=Q;q.makeAsync=makeAsync;q.makeSync=makeSync;return q}q=ns();module.exports=q}(require("__browserify_process"),self)},{util:3,"is-async":6,"async-cancelable-events":7,infiniqueue:8,__browserify_process:5}],6:[function(require,module,exports){function isAsync(method,asyncArgLength){return method.async||!method.sync&&method.length===asyncArgLength}module.exports=isAsync},{}],8:[function(require,module,exports){function Link(val,next){this.val=val;this.next=next;return this}function InfiniQueue(){this.length=0;this.start=undefined;this.end=undefined;return this}InfiniQueue.prototype.enqueue=function enqueue(val){var link=new Link(val,undefined);if(this.end)this.end.next=link;this.end=link;this.start=this.start||link;this.length++};InfiniQueue.prototype.dequeue=function dequeue(){if(this.start){this.length--;var outVal=this.start.val;this.start=this.start.next;return outVal}};InfiniQueue.prototype.enqueueWrapped=function enqueueWrapped(wrappedVal){if(this.end)this.end.next=wrappedVal;this.end=wrappedVal;this.start=this.start||wrappedVal;this.length++};InfiniQueue.prototype.dequeueWrapped=function dequeueWrapped(){if(this.start){this.length--;var outWrapped=this.start;this.start=this.start.next;return outWrapped}};InfiniQueue.prototype.shutdown=function shutdown(done){this.start=undefined;this.end=undefined;this.length=0;if(done&&done instanceof Function)done()};module.exports=InfiniQueue},{}],7:[function(require,module,exports){!function(){var isAsync=require("is-async");function printMaxListenersWarning(eventName,listenerCount){console.warn("The Event "+eventName+" has exceeded "+this._maxListeners+" listeners, currently at "+listenerCount)}function AsyncCancelableEvents(){this._eventListeners={};this._oneTimeListeners={};this._maxListeners=10;this.on("maxListenersPassed",printMaxListenersWarning.bind(this))}AsyncCancelableEvents.prototype.emit=function emit(eventName){if(!this._oneTimeListeners[eventName]&&!this._eventListeners[eventName]){if(arguments[arguments.length-1]instanceof Function)arguments[arguments.length-1](true);return this}var argsArray=Array.prototype.slice.call(arguments,1,arguments.length);var callback=argsArray[argsArray.length-1]instanceof Function?argsArray[argsArray.length-1]:undefined;if(callback)argsArray.pop();var listenersToCall=[];if(this._oneTimeListeners[eventName]instanceof Array){listenersToCall=this._oneTimeListeners[eventName];delete this._oneTimeListeners[eventName];listenersToCall.forEach(function(listener){this.emitSync("removeListener",listener)}.bind(this))}if(this._eventListeners[eventName]instanceof Array)Array.prototype.push.apply(listenersToCall,this._eventListeners[eventName]);var iterate=function iterate(retVal){if(retVal===false){if(callback)callback(false)}else{if(listenersToCall.length){var listener=listenersToCall.shift();if(isAsync(listener,argsArray.length)){listener.apply(null,argsArray)}else{argsArray.pop();var result=listener.apply(null,argsArray);argsArray.push(iterate);iterate(result)}}else{if(callback)callback(true)}}};argsArray.push(iterate);iterate(true);return this};AsyncCancelableEvents.prototype.emitAsync=AsyncCancelableEvents.prototype.emit;AsyncCancelableEvents.prototype.emitSync=function emitSync(eventName){if(!this._oneTimeListeners[eventName]&&!this._eventListeners[eventName]){return this}var argsArray=Array.prototype.slice.call(arguments,1,arguments.length);var listenersToCall=[];if(this._oneTimeListeners[eventName]instanceof Array){listenersToCall=this._oneTimeListeners[eventName];delete this._oneTimeListeners[eventName];listenersToCall.forEach(function(listener){this.emitSync("removeListener",listener)}.bind(this))}if(this._eventListeners[eventName]instanceof Array)Array.prototype.push.apply(listenersToCall,this._eventListeners[eventName]);var iterate=function iterate(retVal){if(retVal!==false){if(listenersToCall.length){var listener=listenersToCall.shift();if(isAsync(listener,argsArray.length)){listener.apply(null,argsArray)}else{argsArray.pop();var result=listener.apply(null,argsArray);argsArray.push(iterate);iterate(result)}}}};argsArray.push(iterate);iterate(true);return this};AsyncCancelableEvents.prototype.on=function on(eventName,listener){if(!this._eventListeners)this._eventListeners={};this._eventListeners[eventName]=this._eventListeners[eventName]instanceof Array?this._eventListeners[eventName]:[];this._eventListeners[eventName].push(listener);var listenerCount=this._eventListeners[eventName].length+(this._oneTimeListeners[eventName]instanceof Array?this._oneTimeListeners[eventName].length:0);if(listenerCount>this._maxListeners)this.emitSync("maxListenersPassed",eventName,listenerCount);this.emitSync("newListener",listener);return this};AsyncCancelableEvents.prototype.onSync=function onSync(eventName,listener){listener.sync=true;return this.on(eventName,listener)};AsyncCancelableEvents.prototype.onAsync=function onAsync(eventName,listener){listener.async=true;return this.on(eventName,listener)};AsyncCancelableEvents.prototype.addListener=AsyncCancelableEvents.prototype.on;AsyncCancelableEvents.prototype.addListenerSync=AsyncCancelableEvents.prototype.onSync;
AsyncCancelableEvents.prototype.addListenerAsync=AsyncCancelableEvents.prototype.onAsync;AsyncCancelableEvents.prototype.once=function once(eventName,listener){if(!this._oneTimeListeners)this._oneTimeListeners={};this._oneTimeListeners[eventName]=this._oneTimeListeners[eventName]instanceof Array?this._oneTimeListeners[eventName]:[];this._oneTimeListeners[eventName].push(listener);var listenerCount=this._oneTimeListeners[eventName].length+(this._eventListeners[eventName]instanceof Array?this._eventListeners[eventName].length:0);if(listenerCount>this._maxListeners)this.emitSync("maxListenersPassed",eventName,listenerCount);this.emitSync("newListener",listener);return this};AsyncCancelableEvents.prototype.onceSync=function onceSync(eventName,listener){listener.sync=true;return this.once(eventName,listener)};AsyncCancelableEvents.prototype.onceAsync=function onceAsync(eventName,listener){listener.async=true;return this.once(eventName,listener)};AsyncCancelableEvents.prototype.removeListener=function removeListener(eventName,listener){if(this._eventListeners[eventName]instanceof Array){this._eventListeners[eventName]=this._eventListeners[eventName].filter(function(registeredListener){if(registeredListener===listener){this.emitSync("removeListener",listener);return false}else{return true}}.bind(this))}if(this._oneTimeListeners[eventName]instanceof Array){this._oneTimeListeners[eventName]=this._oneTimeListeners[eventName].filter(function(registeredListener){if(registeredListener===listener){this.emitSync("removeListener",listener);return false}else{return true}}.bind(this))}return this};AsyncCancelableEvents.prototype.removeAllListeners=function removeAllListeners(eventName){if(eventName){if(this._eventListeners[eventName]instanceof Array){this._eventListeners[eventName].forEach(function(listener){this.emitSync("removeListener",listener)}.bind(this));delete this._eventListeners[eventName]}if(this._oneTimeListeners[eventName]instanceof Array){this._oneTimeListeners[eventName].forEach(function(listener){this.emitSync("removeListener",listener)}.bind(this));delete this._oneTimeListeners[eventName]}}else{Object.keys(this._eventListeners).forEach(function(eventName){this.removeAllListeners(eventName)}.bind(this));Object.keys(this._oneTimeListeners).forEach(function(eventName){this.removeAllListeners(eventName)}.bind(this))}return this};AsyncCancelableEvents.prototype.setMaxListeners=function setMaxListeners(count){this._maxListeners=count;return this};AsyncCancelableEvents.prototype.listeners=function listeners(eventName){var registeredListeners=[];if(this._eventListeners[eventName]instanceof Array)Array.prototype.push.apply(registeredListeners,this._eventListeners[eventName]);if(this._oneTimeListeners[eventName]instanceof Array)Array.prototype.push.apply(registeredListeners,this._oneTimeListeners[eventName]);return registeredListeners};AsyncCancelableEvents.listenerCount=function listenerCount(instance,eventName){var count=0;if(instance._eventListeners[eventName]instanceof Array)count+=instance._eventListeners[eventName].length;if(instance._oneTimeListeners[eventName]instanceof Array)count+=instance._oneTimeListeners[eventName].length;return count};module.exports=AsyncCancelableEvents}()},{"is-async":9}],9:[function(require,module,exports){function isAsync(method,asyncArgLength){return method.async||!method.sync&&method.length===asyncArgLength}module.exports=isAsync},{}]},{},[1]);